基于AI语义识别的评论分析方法

# 简介

使用场景：本方法适用于处理难以量化的文本，对于特征提取，情感分类，等自然语言处理方面有极佳的效果。

概括：通过 AI语义识别 得到属性集合的分类树，再通过 AI语义识别 对所有数据按照分类树分类。

本篇报告包括：

1. 处理方法简介
2. 数据处理思路与流程
3. 处理过程的注意事项

# 处理方法简介

### 方法概述

将不同数据结果汇总清洗，构建评论集全特征空间

从评论数据集中批量抽取评论，将评论不断组合，得到数据的评价指标集合；

将评价指标集合经过累加，得到一个大型的评价指标分类树；

然后使用GPT将全量数据按照此分类树进行分类评价

### 采样与组合：

通过从评论数据中采样和组合提取共同评价指标，是一个**自底向上构建特征空间**的过程，具有良好的代表性。能提取出具备共性且可推广的评价指标，有助于减少噪声数据对模型的影响。

### 评价指标分类树的构建：

评价指标分类树通过层层细分的结构来组织各类评价指标，符合**层次分析法**的基本思路**。**构建评价分类树是一种聚类方法，使得评论内容能够聚集到对应的评价类别中，减少数据复杂度，提高模型对新数据的泛化能力。

### GPT对全量数据分类：

GPT的语义分析和自动标注能力增强了分类效果，它可以从分类树提供的上下文信息出发，对不同评价指标的含义作出细致区分，避免了普通分类算法对复杂文本理解的局限性，符合机器学习的泛化性原则。

# 数据处理思路与流程

## 考虑情形

现在有一份关于 Ray Ban 智能眼镜的用户购买后的 评论，收集了用户的评论以及其他购买信息。

现在有如下需求：

需求：从数据分析中发现更详细的产品形态&功能指向，包括：穿戴体验（外观、重量、舒适度）、音频（听、录）、影像录制（清晰度、使用体验）、AI（场景、效果）、其他使用场景续航、价格等维度。

## **特征提取与抽象**

而对于一个特定的产品，评论中会提到它的特性，我们可以将其作为特征来进行划分。

比如现在有两条评论：

 “重量有400g，戴上感觉像是要把我的脸压扁”；“我开个app要足足5秒” 

如此类确定性的评价，而此类评价 过于具体，并不适合划分为一个个具体的特征，因为他们缺乏泛化能力。我们希望找到评论中的核心关注点。评论数据通常具有冗余，直接使用会导致模型和分析复杂化。提取共同评价指标可以简化数据结构，突出重要信息。

那可以将确定性的评价，抽象成一种更加宽泛的评价

例如：“重量过重”，“软件优化差” ；我们将上面的两条评论变成了更加宽泛的评价。

在这一步抽象的过程中，损失了一些精确的描述，如具体的 400g；但是换来了一个更能适应不同情景的评价。

当下次有评论说 “戴上这个眼镜好像在训练我的颈椎肌肉” 时，我们依旧可以用 “重量过重” 来描述这一条评论的评价，而对于传统的NLP处理方法，在处理比喻以及讽刺与上下文高度相关的内容时，很难与大模型相比较。

## 寻找“共同评价指标”

而此时，我们成功的提取了两个评价，但是一个大规模的评论集合则有很多不同方面的评价。为了满足我们的需求，这时应该从评论数据中逐步提取评价的主要内容，提取评价的主要内容，试图找到其中最常被提及的关键点，即"共同评价指标"。

而这个寻找"共同评价指标"的过程，通过NLP来处理会变得相当费力，且考虑到大模型的文本处理能力，完全可以交给大模型来处理。

寻找"共同评价指标"：处理文本的过程，可以使用小批量评论组合，交给GPT来进行分析；

1. 对于全样本空间，小批量的数据可以反应一部分评价指标，而多次的处理小批量数据，能得到多个评价指标 几乎处处 覆盖样本空间
2. 对于实际操作过程，可以将gpt得到的指标集合与每一批的数据 作为提示词 交给gpt处理；也可以将数据多批交给gpt，让gpt自行迭代指标集合。

注意：此时我们将共同评价指标视为一颗分类树，我们将往这颗分类树里逐渐添加分类的指标，如下所示：

```JSON
{{
    "推荐程度": {{
        "相当推荐": "如 很支持此产品，相当值得推荐 这种强烈的语气",
        "不推荐": "如 不推荐，对此产品不满意",
        "中立情感": "没有明确推荐情况，无明确的支持和反对"
    }},
    "舒适度与人体工学": {{
        "鼻托适配性": "",
        "重量与平衡": "",
        "尺寸与调整性": ""
    }},
    ...
}}
```

验证"共同评价指标"效果；

由于GPT总结的是评论提到的共性，但是并非产品的共性，在上一步得到了"共同评价指标"集合后，应该检查以下方面，以此确保指标合理性：

1. 指标语义清晰：如{“交互体验”，“交互体验问题”}，“交互体验” 是一个可以评价好坏的指标，但是 “交互体验问题” 的语义不够清晰，不应该作为合格的分类指标
2. 指标定义明确：如{“客户服务”，“眼镜生产商的售后服务”}，如果仅将一个指标定义为“客户服务”，这里会有关于提供售后服务主题的模糊，即为 网络销售商店 和 眼镜生产商 都会被视为同一个主题。
3. 使用测试集，验证指标效果：通过抽取一批测试数据（不应该是训练集），检查效果。

## 全量数据处理

通过调用GPT，对每一条评论内容，使用分类树，让GPT进行处理，prompt如下所示：

```JSON
下面我将给你一个关于 Ray-Bon 智能眼镜的评价分类树，将评论提到关于每一条的正面因素时，如果用户没有说这个功能很好，那不应该被认为是正面评价，打上对应的标签。
对于没有提到 Key 所对应的 Value 的属性，应该遵循：当正面评价时，输出 1；负面输出 -1；没提到则输出 None。

{{
    "推荐程度": {{
        "相当推荐": "如 很支持此产品，相当值得推荐 这种强烈的语气",
        "不推荐": "如 不推荐，对此产品不满意",
        "中立情感": "没有明确推荐情况，无明确的支持和反对"
    }},
    "舒适度与人体工学": {{
        "鼻托适配性": "",
        "重量与平衡": "",
        "尺寸与调整性": ""
    }},
    ...
}}
```

实例返回结果：

```JSON
{
    "推荐程度": {
        "相当推荐": None,
        "不推荐": None,
        "中立情感": 1
    },
    "舒适度与人体工学": {
        "鼻托适配性": -1,
        "重量与平衡": -1,
        "尺寸与调整性": None
    },
    "电池续航与充电": {
        "续航时长": -1,
        "充电便利性": -1
    },
    "音质与通话清晰度": {
        "播放音质": None,
        "通话音质": None
    },
    "相机与拍照功能": {
        "拍照便利性": 1,
        "相机性能": None
    },
    "设计与时尚": {
        "外观设计": None,
        "款式选择": None
    },
    "AI助手与功能性": {
        "AI助手的便捷性和智能响应": None,
        "AI功能性的局限性": -1,
        "AI稳定性与交互体验的问题": -1
    },
    "软件与应用兼容性": {
        "应用稳定性": None,
        "地区限制": None
    },
    "价格与价值": {
        "性价比": None
    },
    "耐用性与可靠性": {
        "产品耐用性": None
    },
    "易用性": {
        "日常使用": None,
        "功能操作": None
    },
    "配件与客户服务": {
        "配件可用性": None,
        "客户服务": None
    },
    "使用场景": {
        "户外和运动场景": None,
        "职场与专业环境": None,
        "日常生活与娱乐": 1
    },
    "特殊需求": None
}
```

处理过程注意事项：

1. 调用GPT处理时网络传输耗时很长，请考虑多进程/多线程（但是Python有GIL），注意GPT的API的访问限制。
2. GPT并非时刻都听话，返回的结果并不一定是严格的JSON格式（别的项目遇到过），记得处理异常。
3. GPT返回的数据并非严格的按照prompt的格式，它偶尔会有自己的想法，要使用的时候得清洗数据。

接下来就可以清洗数据，生成分析结果了

关于清洗：

可以加载到pandas里面处理，通常问题为返回JSON格式问题，一般通过设置默认值，转换类型，增加安全访问来解决。

# 参考文献

以下是关于 RayBan 智能眼镜的分析结果

[可供参考的评论分析样本](https://sailisi.feishu.cn/docx/SO6fdHpPFoxF5Fx23XOcPwP8nDe)